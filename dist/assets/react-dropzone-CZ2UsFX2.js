import{r as c,o as Ge}from"./react-CmEzmXpT.js";import{P as l}from"./prop-types-CEtiM3Ss.js";import{f as Je}from"./file-selector-BYzI3Mo1.js";import{a as Ve}from"./attr-accept--eDnxCgl.js";function Ce(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function Pe(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?Ce(Object(n),!0).forEach(function(o){Le(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function Le(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function je(e,r){return er(e)||Ze(e,r)||Xe(e,r)||Qe()}function Qe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xe(e,r){if(e){if(typeof e=="string")return Se(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,r)}}function Se(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}function Ze(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],a=!0,u=!1,p,f;try{for(n=n.call(e);!(a=(p=n.next()).done)&&(o.push(p.value),!(r&&o.length===r));a=!0);}catch(D){u=!0,f=D}finally{try{!a&&n.return!=null&&n.return()}finally{if(u)throw f}}return o}}function er(e){if(Array.isArray(e))return e}var rr="file-invalid-type",nr="file-too-large",tr="file-too-small",or="too-many-files",ir=function(r){r=Array.isArray(r)&&r.length===1?r[0]:r;var n=Array.isArray(r)?"one of ".concat(r.join(", ")):r;return{code:rr,message:"File type must be ".concat(n)}},Re=function(r){return{code:nr,message:"File is larger than ".concat(r," ").concat(r===1?"byte":"bytes")}},Te=function(r){return{code:tr,message:"File is smaller than ".concat(r," ").concat(r===1?"byte":"bytes")}},ar={code:or,message:"Too many files"};function ze(e,r){var n=e.type==="application/x-moz-file"||Ve(e,r);return[n,n?null:ir(r)]}function Ke(e,r,n){if(T(e.size))if(T(r)&&T(n)){if(e.size>n)return[!1,Re(n)];if(e.size<r)return[!1,Te(r)]}else{if(T(r)&&e.size<r)return[!1,Te(r)];if(T(n)&&e.size>n)return[!1,Re(n)]}return[!0,null]}function T(e){return e!=null}function ur(e){var r=e.files,n=e.accept,o=e.minSize,a=e.maxSize,u=e.multiple,p=e.maxFiles;return!u&&r.length>1||u&&p>=1&&r.length>p?!1:r.every(function(f){var D=ze(f,n),_=je(D,1),C=_[0],P=Ke(f,o,a),j=je(P,1),S=j[0];return C&&S})}function H(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function B(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(r){return r==="Files"||r==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Ie(e){e.preventDefault()}function lr(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function cr(e){return e.indexOf("Edge/")!==-1}function sr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return lr(e)||cr(e)}function h(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(o){for(var a=arguments.length,u=new Array(a>1?a-1:0),p=1;p<a;p++)u[p-1]=arguments[p];return r.some(function(f){return!H(o)&&f&&f.apply(void 0,[o].concat(u)),H(o)})}}function fr(){return"showOpenFilePicker"in window}function pr(e){return e=typeof e=="string"?e.split(","):e,[{description:"everything",accept:Array.isArray(e)?e.filter(function(r){return r==="audio/*"||r==="video/*"||r==="image/*"||r==="text/*"||/\w+\/[-+.\w]+/g.test(r)}).reduce(function(r,n){return Pe(Pe({},r),{},Le({},n,[]))},{}):{}}]}function gr(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function dr(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}var yr=["children"],mr=["open"],br=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],vr=["refKey","onChange","onClick"];function Dr(e){return Fr(e)||Or(e)||Me(e)||hr()}function hr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Or(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fr(e){if(Array.isArray(e))return ae(e)}function ie(e,r){return wr(e)||Er(e,r)||Me(e,r)||Ar()}function Ar(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Me(e,r){if(e){if(typeof e=="string")return ae(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,r)}}function ae(e,r){(r==null||r>e.length)&&(r=e.length);for(var n=0,o=new Array(r);n<r;n++)o[n]=e[n];return o}function Er(e,r){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var o=[],a=!0,u=!1,p,f;try{for(n=n.call(e);!(a=(p=n.next()).done)&&(o.push(p.value),!(r&&o.length===r));a=!0);}catch(D){u=!0,f=D}finally{try{!a&&n.return!=null&&n.return()}finally{if(u)throw f}}return o}}function wr(e){if(Array.isArray(e))return e}function ke(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,o)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?ke(Object(n),!0).forEach(function(o){ue(e,o,n[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach(function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(n,o))})}return e}function ue(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function W(e,r){if(e==null)return{};var n=_r(e,r),o,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)o=u[a],!(r.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(e,o)&&(n[o]=e[o])}return n}function _r(e,r){if(e==null)return{};var n={},o=Object.keys(e),a,u;for(u=0;u<o.length;u++)a=o[u],!(r.indexOf(a)>=0)&&(n[a]=e[a]);return n}var ce=c.forwardRef(function(e,r){var n=e.children,o=W(e,yr),a=Cr(o),u=a.open,p=W(a,mr);return c.useImperativeHandle(r,function(){return{open:u}},[u]),Ge.createElement(c.Fragment,null,n(s(s({},p),{},{open:u})))});ce.displayName="Dropzone";var $e={disabled:!1,getFilesFromEvent:Je,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};ce.defaultProps=$e;ce.propTypes={children:l.func,accept:l.oneOfType([l.string,l.arrayOf(l.string)]),multiple:l.bool,preventDropOnDocument:l.bool,noClick:l.bool,noKeyboard:l.bool,noDrag:l.bool,noDragEventsBubbling:l.bool,minSize:l.number,maxSize:l.number,maxFiles:l.number,disabled:l.bool,getFilesFromEvent:l.func,onFileDialogCancel:l.func,onFileDialogOpen:l.func,useFsAccessApi:l.bool,onDragEnter:l.func,onDragLeave:l.func,onDragOver:l.func,onDrop:l.func,onDropAccepted:l.func,onDropRejected:l.func,validator:l.func};var le={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function Cr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=s(s({},$e),e),n=r.accept,o=r.disabled,a=r.getFilesFromEvent,u=r.maxSize,p=r.minSize,f=r.multiple,D=r.maxFiles,_=r.onDragEnter,C=r.onDragLeave,P=r.onDragOver,j=r.onDrop,S=r.onDropAccepted,N=r.onDropRejected,U=r.onFileDialogCancel,Y=r.onFileDialogOpen,se=r.useFsAccessApi,q=r.preventDropOnDocument,fe=r.noClick,G=r.noKeyboard,pe=r.noDrag,O=r.noDragEventsBubbling,J=r.validator,V=c.useMemo(function(){return typeof Y=="function"?Y:xe},[Y]),I=c.useMemo(function(){return typeof U=="function"?U:xe},[U]),m=c.useRef(null),b=c.useRef(null),Be=c.useReducer(Pr,le),ge=ie(Be,2),k=ge[0],y=ge[1],He=k.isFocused,de=k.isFileDialogActive,ye=k.draggedFiles,x=c.useRef(typeof window<"u"&&window.isSecureContext&&se&&fr()),me=function(){!x.current&&de&&setTimeout(function(){if(b.current){var i=b.current.files;i.length||(y({type:"closeDialog"}),I())}},300)};c.useEffect(function(){return window.addEventListener("focus",me,!1),function(){window.removeEventListener("focus",me,!1)}},[b,de,I,x]);var F=c.useRef([]),be=function(i){m.current&&m.current.contains(i.target)||(i.preventDefault(),F.current=[])};c.useEffect(function(){return q&&(document.addEventListener("dragover",Ie,!1),document.addEventListener("drop",be,!1)),function(){q&&(document.removeEventListener("dragover",Ie),document.removeEventListener("drop",be))}},[m,q]);var ve=c.useCallback(function(t){t.preventDefault(),t.persist(),M(t),F.current=[].concat(Dr(F.current),[t.target]),B(t)&&Promise.resolve(a(t)).then(function(i){H(t)&&!O||(y({draggedFiles:i,isDragActive:!0,type:"setDraggedFiles"}),_&&_(t))})},[a,_,O]),De=c.useCallback(function(t){t.preventDefault(),t.persist(),M(t);var i=B(t);if(i&&t.dataTransfer)try{t.dataTransfer.dropEffect="copy"}catch{}return i&&P&&P(t),!1},[P,O]),he=c.useCallback(function(t){t.preventDefault(),t.persist(),M(t);var i=F.current.filter(function(d){return m.current&&m.current.contains(d)}),g=i.indexOf(t.target);g!==-1&&i.splice(g,1),F.current=i,!(i.length>0)&&(y({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),B(t)&&C&&C(t))},[m,C,O]),L=c.useCallback(function(t,i){var g=[],d=[];t.forEach(function(v){var R=ze(v,n),w=ie(R,2),X=w[0],Z=w[1],ee=Ke(v,p,u),$=ie(ee,2),re=$[0],ne=$[1],te=J?J(v):null;if(X&&re&&!te)g.push(v);else{var oe=[Z,ne];te&&(oe=oe.concat(te)),d.push({file:v,errors:oe.filter(function(qe){return qe})})}}),(!f&&g.length>1||f&&D>=1&&g.length>D)&&(g.forEach(function(v){d.push({file:v,errors:[ar]})}),g.splice(0)),y({acceptedFiles:g,fileRejections:d,type:"setFiles"}),j&&j(g,d,i),d.length>0&&N&&N(d,i),g.length>0&&S&&S(g,i)},[y,f,n,p,u,D,j,S,N,J]),z=c.useCallback(function(t){t.preventDefault(),t.persist(),M(t),F.current=[],B(t)&&Promise.resolve(a(t)).then(function(i){H(t)&&!O||L(i,t)}),y({type:"reset"})},[a,L,O]),A=c.useCallback(function(){if(x.current){y({type:"openDialog"}),V();var t={multiple:f,types:pr(n)};window.showOpenFilePicker(t).then(function(i){return a(i)}).then(function(i){L(i,null),y({type:"closeDialog"})}).catch(function(i){gr(i)?(I(i),y({type:"closeDialog"})):dr(i)&&(x.current=!1,b.current&&(b.current.value=null,b.current.click()))});return}b.current&&(y({type:"openDialog"}),V(),b.current.value=null,b.current.click())},[y,V,I,se,L,n,f]),Oe=c.useCallback(function(t){!m.current||!m.current.isEqualNode(t.target)||(t.key===" "||t.key==="Enter"||t.keyCode===32||t.keyCode===13)&&(t.preventDefault(),A())},[m,A]),Fe=c.useCallback(function(){y({type:"focus"})},[]),Ae=c.useCallback(function(){y({type:"blur"})},[]),Ee=c.useCallback(function(){fe||(sr()?setTimeout(A,0):A())},[fe,A]),E=function(i){return o?null:i},Q=function(i){return G?null:E(i)},K=function(i){return pe?null:E(i)},M=function(i){O&&i.stopPropagation()},We=c.useMemo(function(){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.refKey,g=i===void 0?"ref":i,d=t.role,v=t.onKeyDown,R=t.onFocus,w=t.onBlur,X=t.onClick,Z=t.onDragEnter,ee=t.onDragOver,$=t.onDragLeave,re=t.onDrop,ne=W(t,br);return s(s(ue({onKeyDown:Q(h(v,Oe)),onFocus:Q(h(R,Fe)),onBlur:Q(h(w,Ae)),onClick:E(h(X,Ee)),onDragEnter:K(h(Z,ve)),onDragOver:K(h(ee,De)),onDragLeave:K(h($,he)),onDrop:K(h(re,z)),role:typeof d=="string"&&d!==""?d:"button"},g,m),!o&&!G?{tabIndex:0}:{}),ne)}},[m,Oe,Fe,Ae,Ee,ve,De,he,z,G,pe,o]),Ne=c.useCallback(function(t){t.stopPropagation()},[]),Ue=c.useMemo(function(){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=t.refKey,g=i===void 0?"ref":i,d=t.onChange,v=t.onClick,R=W(t,vr),w=ue({accept:n,multiple:f,type:"file",style:{display:"none"},onChange:E(h(d,z)),onClick:E(h(v,Ne)),tabIndex:-1},g,b);return s(s({},w),R)}},[b,n,f,z,o]),we=ye.length,_e=we>0&&ur({files:ye,accept:n,minSize:p,maxSize:u,multiple:f,maxFiles:D}),Ye=we>0&&!_e;return s(s({},k),{},{isDragAccept:_e,isDragReject:Ye,isFocused:He&&!o,getRootProps:We,getInputProps:Ue,rootRef:m,inputRef:b,open:E(A)})}function Pr(e,r){switch(r.type){case"focus":return s(s({},e),{},{isFocused:!0});case"blur":return s(s({},e),{},{isFocused:!1});case"openDialog":return s(s({},le),{},{isFileDialogActive:!0});case"closeDialog":return s(s({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=r.isDragActive,o=r.draggedFiles;return s(s({},e),{},{draggedFiles:o,isDragActive:n});case"setFiles":return s(s({},e),{},{acceptedFiles:r.acceptedFiles,fileRejections:r.fileRejections});case"reset":return s({},le);default:return e}}function xe(){}export{Cr as u};
